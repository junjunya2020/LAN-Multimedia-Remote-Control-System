// OpenCC.js 简繁转换库
// 使用直译方式，不进行语义翻译

class OpenCC {
    constructor() {
        this.isTraditional = false;
        this.initConversionTables();
    }

    initConversionTables() {
        // 简体到繁体转换表（直译）
        this.s2tTable = {
            '万': '萬', '与': '與', '丑': '醜', '专': '專', '业': '業',
            '丛': '叢', '东': '東', '丝': '絲', '丢': '丟', '两': '兩',
            '严': '嚴', '丧': '喪', '个': '個', '丰': '豐', '临': '臨',
            '为': '為', '丽': '麗', '举': '舉', '义': '義', '乌': '烏',
            '乐': '樂', '乔': '喬', '习': '習', '乡': '鄉', '书': '書',
            '买': '買', '乱': '亂', '争': '爭', '于': '於', '云': '雲',
            '亚': '亞', '产': '產', '亩': '畝', '亲': '親', '亿': '億',
            '仅': '僅', '从': '從', '仑': '侖', '仓': '倉', '仪': '儀',
            '们': '們', '价': '價', '众': '眾', '优': '優', '会': '會',
            '传': '傳', '伦': '倫', '体': '體', '余': '餘', '佛': '彿',
            '作': '作', '你': '你', '佣': '傭', '备': '備', '儿': '兒',
            '克': '克', '党': '黨', '兰': '蘭', '关': '關', '兴': '興',
            '兹': '茲', '养': '養', '兽': '獸', '军': '軍', '农': '農',
            '冯': '馮', '冲': '衝', '决': '決', '况': '況', '冻': '凍',
            '净': '淨', '准': '準', '几': '幾', '凤': '鳳', '凭': '憑',
            '凯': '凱', '出': '出', '击': '擊', '凿': '鑿', '分': '分',
            '刘': '劉', '则': '則', '刚': '剛', '创': '創', '别': '別',
            '利': '利', '别': '彆', '到': '到', '制': '製', '刺': '刺',
            '剂': '劑', '前': '前', '剑': '劍', '剧': '劇', '剩': '剩',
            '力': '力', '办': '辦', '功': '功', '加': '加', '务': '務',
            '动': '動', '助': '助', '努': '努', '劫': '劫', '励': '勵',
            '劲': '勁', '劳': '勞', '势': '勢', '勇': '勇', '勤': '勤',
            '包': '包', '化': '化', '北': '北', '区': '區', '医': '醫',
            '十': '十', '千': '千', '升': '升', '午': '午', '半': '半',
            '华': '華', '协': '協', '单': '單', '卖': '賣', '南': '南',
            '博': '博', '卜': '卜', '占': '佔', '卡': '卡', '卢': '盧',
            '卫': '衛', '印': '印', '危': '危', '却': '卻', '卷': '捲',
            '厂': '廠', '厅': '廳', '历': '歷', '压': '壓', '厌': '厭',
            '厕': '廁', '厚': '厚', '原': '原', '去': '去', '县': '縣',
            '参': '參', '又': '又', '及': '及', '友': '友', '双': '雙',
            '反': '反', '发': '發', '变': '變', '口': '口', '古': '古',
            '句': '句', '另': '另', '只': '隻', '叫': '叫', '召': '召',
            '可': '可', '台': '臺', '史': '史', '右': '右', '叶': '葉',
            '号': '號', '司': '司', '各': '各', '合': '合', '吉': '吉',
            '同': '同', '名': '名', '后': '後', '向': '向', '吕': '呂',
            '吗': '嗎', '君': '君', '听': '聽', '启': '啟', '吴': '吳',
            '吸': '吸', '吹': '吹', '告': '告', '员': '員', '呢': '呢',
            '周': '周', '味': '味', '呼': '呼', '命': '命', '和': '和',
            '品': '品', '咱': '咱', '响': '響', '哥': '哥', '哦': '哦',
            '哪': '哪', '哭': '哭', '哲': '哲', '啊': '啊', '啦': '啦',
            '啪': '啪', '喂': '喂', '善': '善', '喇': '喇', '喊': '喊',
            '喜': '喜', '喝': '喝', '喷': '噴', '喻': '喻', '嗯': '嗯',
            '嗳': '噯', '嘎': '嘎', '嘘': '噓', '嘛': '嘛', '嘻': '嘻',
            '嘿': '嘿', '器': '器', '噪': '噪', '嘴': '嘴', '噜': '嚕',
            '噩': '噩', '嚓': '嚓', '四': '四', '回': '回', '因': '因',
            '团': '團', '园': '園', '围': '圍', '国': '國', '图': '圖',
            '圆': '圓', '土': '土', '圣': '聖', '在': '在', '地': '地',
            '场': '場', '坏': '壞', '坐': '坐', '块': '塊', '坚': '堅',
            '坛': '壇', '坝': '壩', '坟': '墳', '坠': '墜', '坡': '坡',
            '坤': '坤', '坦': '坦', '垂': '垂', '型': '型', '垒': '壘',
            '垦': '墾', '基': '基', '堂': '堂', '堆': '堆', '堕': '墮',
            '堡': '堡', '堤': '堤', '塔': '塔', '塘': '塘', '塞': '塞',
            '境': '境', '墙': '牆', '增': '增', '士': '士', '声': '聲',
            '处': '處', '备': '備', '复': '複', '夏': '夏', '外': '外',
            '多': '多', '夜': '夜', '够': '夠', '大': '大', '天': '天',
            '太': '太', '夫': '夫', '头': '頭', '夸': '誇', '夹': '夾',
            '夺': '奪', '奇': '奇', '奉': '奉', '奋': '奮', '女': '女',
            '她': '她', '好': '好', '如': '如', '妇': '婦', '妈': '媽',
            '妖': '妖', '妙': '妙', '妥': '妥', '妨': '妨', '妹': '妹',
            '妻': '妻', '姐': '姐', '姑': '姑', '姓': '姓', '委': '委',
            '姜': '薑', '威': '威', '娃': '娃', '娘': '娘', '娱': '娛',
            '婆': '婆', '婚': '婚', '媒': '媒', '嫁': '嫁', '嫂': '嫂',
            '嫉': '嫉', '嫌': '嫌', '嫩': '嫩', '子': '子', '孔': '孔',
            '字': '字', '存': '存', '孙': '孫', '学': '學', '孩': '孩',
            '宁': '寧', '它': '它', '宅': '宅', '宇': '宇', '守': '守',
            '安': '安', '完': '完', '宋': '宋', '宏': '宏', '宗': '宗',
            '官': '官', '定': '定', '宜': '宜', '宝': '寶', '实': '實',
            '审': '審', '客': '客', '宣': '宣', '室': '室', '宫': '宮',
            '害': '害', '家': '家', '容': '容', '宽': '寬', '宾': '賓',
            '宿': '宿', '寂': '寂', '寄': '寄', '密': '密', '富': '富',
            '寒': '寒', '察': '察', '对': '對', '寻': '尋', '导': '導',
            '寿': '壽', '将': '將', '小': '小', '少': '少', '尔': '爾',
            '尘': '塵', '尚': '尚', '尝': '嘗', '就': '就', '尸': '屍',
            '尺': '尺', '尽': '盡', '层': '層', '居': '居', '屈': '屈',
            '屋': '屋', '展': '展', '属': '屬', '山': '山', '岁': '歲',
            '岂': '豈', '岗': '崗', '岛': '島', '岩': '岩', '岭': '嶺',
            '岳': '岳', '岸': '岸', '峰': '峰', '峻': '峻', '崇': '崇',
            '川': '川', '州': '州', '巡': '巡', '工': '工', '左': '左',
            '巧': '巧', '巨': '巨', '差': '差', '己': '己', '已': '已',
            '巴': '巴', '布': '布', '帅': '帥', '师': '師', '希': '希',
            '帐': '帳', '帕': '帕', '帖': '帖', '帘': '簾', '帚': '帚',
            '带': '帶', '席': '席', '帮': '幫', '常': '常', '干': '幹',
            '平': '平', '年': '年', '并': '並', '幸': '幸', '幻': '幻',
            '幼': '幼', '广': '廣', '庄': '莊', '庆': '慶', '床': '床',
            '序': '序', '底': '底', '店': '店', '庙': '廟', '府': '府',
            '庞': '龐', '度': '度', '座': '座', '库': '庫', '庭': '庭',
            '康': '康', '庸': '庸', '廊': '廊', '延': '延', '建': '建',
            '开': '開', '异': '異', '弃': '棄', '弄': '弄', '式': '式',
            '弓': '弓', '引': '引', '弗': '弗', '弘': '弘', '张': '張',
            '弥': '彌', '弦': '弦', '弯': '彎', '弱': '弱', '弹': '彈',
            '强': '強', '归': '歸', '当': '當', '录': '錄', '形': '形',
            '彩': '彩', '彪': '彪', '彭': '彭', '影': '影', '往': '往',
            '征': '徵', '待': '待', '很': '很', '律': '律', '后': '後',
            '徐': '徐', '徒': '徒', '得': '得', '从': '從', '御': '禦',
            '微': '微', '德': '德', '心': '心', '必': '必', '忆': '憶',
            '忍': '忍', '志': '志', '忘': '忘', '忙': '忙', '忠': '忠',
            '忧': '憂', '快': '快', '念': '念', '忽': '忽', '怀': '懷',
            '态': '態', '怎': '怎', '怒': '怒', '怕': '怕', '怖': '怖',
            '怜': '憐', '思': '思', '怡': '怡', '急': '急', '性': '性',
            '怨': '怨', '怪': '怪', '总': '總', '恋': '戀', '恒': '恆',
            '恕': '恕', '恭': '恭', '息': '息', '恰': '恰', '恶': '惡',
            '悄': '悄', '悔': '悔', '悟': '悟', '悠': '悠', '患': '患',
            '您': '您', '悲': '悲', '情': '情', '惊': '驚', '惑': '惑',
            '惜': '惜', '惠': '惠', '惧': '懼', '惨': '慘', '想': '想',
            '意': '意', '愚': '愚', '感': '感', '愧': '愧', '愿': '願',
            '慈': '慈', '慢': '慢', '慧': '慧', '慰': '慰', '憎': '憎',
            '愤': '憤', '慌': '慌', '慎': '慎', '慕': '慕', '慧': '慧',
            '慰': '慰', '憎': '憎', '愤': '憤', '慌': '慌', '慎': '慎',
            '慕': '慕', '慧': '慧', '慰': '慰', '憎': '憎', '愤': '憤',
            '慌': '慌', '慎': '慎', '慕': '慕', '慧': '慧', '慰': '慰',
            '憎': '憎', '愤': '憤', '慌': '慌', '慎': '慎', '慕': '慕'
        };

        // 繁体到简体转换表（直译）
        this.t2sTable = {};
        for (let key in this.s2tTable) {
            this.t2sTable[this.s2tTable[key]] = key;
        }
    }

    // 简体转繁体
    s2t(text) {
        if (!text) return text;
        let result = '';
        for (let i = 0; i < text.length; i++) {
            const char = text[i];
            result += this.s2tTable[char] || char;
        }
        return result;
    }

    // 繁体转简体
    t2s(text) {
        if (!text) return text;
        let result = '';
        for (let i = 0; i < text.length; i++) {
            const char = text[i];
            result += this.t2sTable[char] || char;
        }
        return result;
    }

    // 切换简繁状态
    toggle() {
        this.isTraditional = !this.isTraditional;
        return this.isTraditional;
    }

    // 转换文本（根据当前状态）
    convert(text) {
        if (!text) return text;
        return this.isTraditional ? this.s2t(text) : this.t2s(text);
    }

    // 获取当前状态
    getStatus() {
        return this.isTraditional ? 'traditional' : 'simplified';
    }

    // 设置状态
    setStatus(status) {
        this.isTraditional = status === 'traditional';
    }
}

// 创建全局实例
window.opencc = new OpenCC();